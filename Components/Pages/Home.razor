@page "/"
@inject HospitalTriageAI.Services.IPatientService PatientService
@inject HospitalTriageAI.Services.IDoctorService DoctorService
@inject HospitalTriageAI.Services.IAuthService AuthService

<div class="home-page">
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>AI-Powered Smart<br />Triage <span class="text-primary">System</span></h1>
            <p class="hero-desc">
                Advanced machine learning system for patient risk assessment and hospital triage. 
                Faster prioritization. Smarter decisions. Better outcomes.
            </p>
            <div class="hero-buttons">
                <a href="/patient" class="btn btn-primary">Patient Portal</a>
                <a href="/admin" class="btn btn-accent">Admin Portal</a>
            </div>
        </div>
        <div class="hero-visual">
            <div class="hero-illustration">
                <svg width="100%" height="300" viewBox="0 0 400 300">
                    <rect x="50" y="50" width="300" height="200" rx="10" fill="rgba(78, 189, 184, 0.1)" stroke="#4EBDB8" stroke-width="2"/>
                    <circle cx="200" cy="120" r="40" fill="#4EBDB8" opacity="0.3"/>
                    <path d="M180 120 L195 135 L220 105" stroke="#4EBDB8" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    <rect x="80" y="180" width="80" height="50" rx="5" fill="#E5754B" opacity="0.2"/>
                    <rect x="170" y="180" width="80" height="50" rx="5" fill="#4EBDB8" opacity="0.2"/>
                    <rect x="260" y="180" width="60" height="50" rx="5" fill="#E5754B" opacity="0.2"/>
                </svg>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works">
        <h2>How It Works</h2>
        <div class="steps-grid">
            <div class="step-card">
                <div class="step-number">1</div>
                <div class="step-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                </div>
                <h3>Patient Submits Data</h3>
                <p>Patient enters symptoms and vital signs through the intake form.</p>
            </div>
            <div class="step-arrow">
                <svg width="40" height="24" viewBox="0 0 40 24">
                    <path d="M0 12H35M35 12L25 4M35 12L25 20" stroke="#4EBDB8" stroke-width="2" fill="none"/>
                </svg>
            </div>
            <div class="step-card">
                <div class="step-number">2</div>
                <div class="step-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                </div>
                <h3>AI Calculates Risk</h3>
                <p>Machine learning model analyzes data and determines risk level instantly.</p>
            </div>
            <div class="step-arrow">
                <svg width="40" height="24" viewBox="0 0 40 24">
                    <path d="M0 12H35M35 12L25 4M35 12L25 20" stroke="#4EBDB8" stroke-width="2" fill="none"/>
                </svg>
            </div>
            <div class="step-card">
                <div class="step-number">3</div>
                <div class="step-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </div>
                <h3>Doctor Assignment</h3>
                <p>Admin assigns patient to available doctor based on urgency.</p>
            </div>
        </div>
    </section>

    <!-- System Capabilities Section -->
    <section class="capabilities-section">
        <h2>Why Choose TriageAI?</h2>
        <div class="capabilities-grid">
            <div class="capability-card">
                <div class="capability-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                </div>
                <h3>Smart Risk Scoring</h3>
                <p>AI evaluates symptoms and vitals to determine urgency level.</p>
            </div>
            <div class="capability-card">
                <div class="capability-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <circle cx="19" cy="11" r="2"/>
                        <path d="M19 8v1M19 13v1M22 11h-1M17 11h-1"/>
                    </svg>
                </div>
                <h3>Doctor Availability</h3>
                <p>View available doctors and assign cases instantly.</p>
            </div>
            <div class="capability-card">
                <div class="capability-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                    </svg>
                </div>
                <h3>Instant PDF Reports</h3>
                <p>Generate AI-powered medical summary for doctors.</p>
            </div>
            <div class="capability-card">
                <div class="capability-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <h3>Secure & Private</h3>
                <p>Enterprise-grade encryption and protected medical records.</p>
            </div>
        </div>
    </section>

    <!-- Live Stats Section -->
    <section class="stats-section">
        <h2>Live System Status</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon patients">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                    </svg>
                </div>
                <span class="stat-value">@_stats.TotalPatients</span>
                <span class="stat-label">Active Patients</span>
            </div>
            <div class="stat-card alert-card">
                <div class="stat-icon alerts">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                </div>
                <span class="stat-value">@_stats.HighRiskCount</span>
                <span class="stat-label">High-Risk Alerts</span>
            </div>
            <div class="stat-card">
                <div class="stat-icon doctors">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <line x1="20" y1="8" x2="20" y2="14"/>
                        <line x1="23" y1="11" x2="17" y2="11"/>
                    </svg>
                </div>
                <span class="stat-value">@_doctorStats.AvailableDoctors</span>
                <span class="stat-label">Doctors Available</span>
            </div>
            <div class="stat-card">
                <div class="stat-icon reports">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                </div>
                <span class="stat-value">@_stats.CompletedToday</span>
                <span class="stat-label">Reports Today</span>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <h2>Ready to Get Started?</h2>
        <p>Enter your email to create patient account</p>
        <div class="cta-buttons">
            <a href="/signup" class="btn btn-white">Create Account</a>
            <a href="/login" class="btn btn-outline-white">Sign In</a>
        </div>
    </section>
</div>

@code {
    private PatientStats _stats = new();
    private DoctorStats _doctorStats = new();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            _stats = await PatientService.GetStatsAsync();
            _doctorStats = await DoctorService.GetStatsAsync();
        }
        catch 
        { 
            _stats = new PatientStats();
            _doctorStats = new DoctorStats();
        }
    }
}

<style>
    .home-page {
        display: flex;
        flex-direction: column;
        gap: var(--space-12);
    }

    /* Hero */
    .hero {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-8);
        align-items: center;
        padding: var(--space-8) 0;
    }

    .hero h1 {
        font-size: 2.75rem;
        font-weight: 700;
        line-height: 1.2;
        margin-bottom: var(--space-4);
        color: var(--gray-900);
    }

    .hero-desc {
        font-size: 1.125rem;
        color: var(--gray-500);
        margin-bottom: var(--space-6);
        line-height: 1.7;
    }

    .hero-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-3);
    }

    .hero-visual {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .hero-illustration {
        max-width: 400px;
    }

    /* How It Works */
    .how-it-works {
        text-align: center;
    }

    .how-it-works h2 {
        margin-bottom: var(--space-8);
    }

    .steps-grid {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-4);
    }

    .step-card {
        background: var(--white);
        border: 2px solid var(--primary-border);
        border-radius: var(--radius-lg);
        padding: var(--space-6);
        text-align: center;
        width: 220px;
        min-height: 220px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        position: relative;
    }

    .step-number {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        width: 28px;
        height: 28px;
        background: var(--accent);
        color: white;
        border-radius: 50%;
        font-weight: 700;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .step-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto var(--space-4);
        background: var(--primary-light);
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
    }

    .step-card h3 {
        font-size: 1rem;
        margin-bottom: var(--space-2);
    }

    .step-card p {
        font-size: 0.875rem;
        color: var(--gray-500);
        margin: 0;
    }

    .step-arrow {
        display: flex;
        align-items: center;
    }

    /* Capabilities */
    .capabilities-section {
        background: var(--primary);
        color: var(--white);
        padding: var(--space-12) var(--space-8);
        border-radius: var(--radius-xl);
        margin: 0 calc(var(--space-6) * -1);
    }

    .capabilities-section h2 {
        color: var(--white);
        text-align: center;
        margin-bottom: var(--space-8);
    }

    .capabilities-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-4);
    }

    .capability-card {
        background: rgba(255,255,255,0.12);
        border-radius: var(--radius-lg);
        padding: var(--space-5);
        text-align: center;
        transition: background 0.2s;
    }

    .capability-card:hover {
        background: rgba(255,255,255,0.18);
    }

    .capability-icon {
        width: 56px;
        height: 56px;
        margin: 0 auto var(--space-3);
        background: var(--white);
        color: var(--primary);
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .capability-card h3 {
        color: var(--white);
        font-size: 0.9375rem;
        margin-bottom: var(--space-2);
    }

    .capability-card p {
        color: rgba(255,255,255,0.8);
        font-size: 0.8125rem;
        line-height: 1.5;
        margin: 0;
    }

    /* Stats */
    .stats-section {
        text-align: center;
    }

    .stats-section h2 {
        margin-bottom: var(--space-6);
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-6);
    }

    .stat-card {
        background: var(--white);
        border: 2px solid var(--primary-border);
        border-radius: var(--radius-lg);
        padding: var(--space-6);
        text-align: center;
        box-shadow: var(--shadow-card);
        transition: transform 0.2s;
    }

    .stat-card:hover {
        transform: translateY(-2px);
    }

    .stat-card.alert-card {
        border-color: #DC2626;
        background: linear-gradient(to bottom, rgba(220,38,38,0.05), var(--white));
    }

    .stat-icon {
        width: 48px;
        height: 48px;
        margin: 0 auto var(--space-3);
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .stat-icon.patients { background: var(--primary-light); color: var(--primary); }
    .stat-icon.alerts { background: rgba(220,38,38,0.1); color: #DC2626; }
    .stat-icon.doctors { background: rgba(34,197,94,0.1); color: #22C55E; }
    .stat-icon.reports { background: rgba(229,117,75,0.1); color: var(--accent); }

    .stat-value {
        display: block;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--gray-900);
    }

    .stat-label {
        color: var(--gray-500);
        font-size: 0.875rem;
    }

    /* CTA */
    .cta-section {
        background: var(--accent);
        color: var(--white);
        padding: var(--space-10);
        border-radius: var(--radius-xl);
        text-align: center;
        margin: 0 calc(var(--space-6) * -1);
    }

    .cta-section h2 {
        color: var(--white);
        margin-bottom: var(--space-2);
    }

    .cta-section p {
        color: rgba(255,255,255,0.9);
        margin-bottom: var(--space-6);
    }

    .cta-buttons {
        display: flex;
        justify-content: center;
        gap: var(--space-3);
    }

    .btn-outline-white {
        background: transparent;
        border: 2px solid var(--white);
        color: var(--white);
    }

    .btn-outline-white:hover {
        background: var(--white);
        color: var(--accent);
    }

    @@media (max-width: 1024px) {
        .hero { grid-template-columns: 1fr; }
        .hero-visual { display: none; }
        .steps-grid { flex-wrap: wrap; }
        .step-arrow { display: none; }
        .capabilities-grid { grid-template-columns: repeat(2, 1fr); }
        .stats-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @@media (max-width: 640px) {
        .hero h1 { font-size: 2rem; }
        .hero-buttons { 
            flex-direction: column; 
            width: 100%;
        }
        .hero-buttons .btn {
            width: 100%;
            text-align: center;
            display: block;
        }
        .capabilities-grid { grid-template-columns: 1fr 1fr; }
        .stats-grid { grid-template-columns: 1fr; }
        .cta-buttons { flex-direction: column; }
    }
</style>
